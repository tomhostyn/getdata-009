X_train <- select(X_train, keep_i)
X_test <- select(X_test, keep_i)
keep <- grepl ("*mean*|*std*", features$V2) & !grepl ("*meanFreq*", features$V2)
keep_i <- 1:length(keep)[keep]
X_train <- select(X_train, keep_i)
X_test <- select(X_test, keep_i)
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
load_har_data_table()
keep <- grepl ("*mean\(*|*std\(*", features$V2)
keep <- grepl ("*mean/(*|*std*", features$V2)
keep <- grepl ("*mean(*|*std*", features$V2)
keep <- grepl ("*mean\\(*|*std*", features$V2)
features$V2[ grepl ("*mean\\(*|*std*", features$V2) ]
features$V2[ grepl ("*mean\\(*|*std*", features$V2) ]
features$V2[ grepl ("*mean\(*|*std*", features$V2) ]
features$V2[ grepl ("*mean[\(]*|*std*", features$V2) ]
features$V2[ grepl ("*mean[\(]*", features$V2) ]
features$V2[ grepl ("*mean[\\(]*", features$V2) ]
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
features$V2[ grepl ("*mean\\(\\)*", features$V2) ]
features$V2[ grepl ("*mean\\(\\)*", features$V2) ]
features$V2[ grepl ("*mean\\(\\)*|*std*", features$V2)]
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
DT <- load_har_data_table()
DT
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
uci_har_dir <- "UCI HAR Dataset"
uci_har_path <- paste (wd, sep="/", uci_har_dir)
uci_har_train_path <- paste (uci_har_path, sep="/", "train")
uci_har_test_path <- paste (uci_har_path, sep="/", "test")
features_path <- paste (uci_har_path, sep="/", "features.txt")
subject_train_path <- paste(uci_har_train_path, sep="/", "subject_train.txt")
X_train_path <- paste(uci_har_train_path, sep="/", "X_train.txt")
Y_train_path <- paste(uci_har_train_path, sep="/", "Y_train.txt")
subject_test_path <- paste(uci_har_test_path, sep="/", "subject_test.txt")
X_test_path <- paste(uci_har_test_path, sep="/", "X_test.txt")
Y_test_path <- paste(uci_har_test_path, sep="/", "Y_test.txt")
delayedAssign("features", data.table(read.table(features_path, stringsAsFactors=FALSE)))
delayedAssign("subject_train", data.table(read.table(subject_train_path)))
delayedAssign("X_train", data.table(read.table (X_train_path)))
delayedAssign("Y_train", data.table(read.table (Y_train_path)))
delayedAssign("subject_train", data.table(read.table(subject_train_path)))
delayedAssign("X_train", data.table(read.table (X_train_path)))
delayedAssign("Y_train", data.table(read.table (Y_train_path)))
delayedAssign("subject_test", data.table(read.table(subject_test_path)))
delayedAssign("X_test", data.table(read.table (X_test_path)))
delayedAssign("Y_test", data.table(read.table (Y_test_path)))
#  Load train dataset as datatables.
#  Assign labels as documented in the features file
setnames (X_train, features$V2)
setnames (subject_train, "Subject")
setnames (Y_train, "Y")
#  Load test dataset as datatables.
#  Assign labels as documented in the features file
setnames (X_test, features$V2)
setnames (subject_test, "Subject")
setnames (Y_test, "Y")
keep <- grepl ("*mean\\(\\)*|*std*", features$V2)
X_train <- select(X_train, keep)
X_test <- select(X_test, keep)
keep <- grep ("*mean\\(\\)*|*std*", features$V2)
X_train <- select(X_train, keep)
X_test <- select(X_test, keep)
#  append subject column and Y column to the features.
har_train <- cbind(subject_train, X_train, Y_train )
har_test <- cbind(subject_test, X_test, Y_test)
#
# Combine test and train datasets
#
har <- rbind (har_train, har_test)
har
DT <- load_har_data_table()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
delayedAssign("features", data.table(read.table(features_path, stringsAsFactors=FALSE)))
delayedAssign("subject_train", data.table(read.table(subject_train_path)))
delayedAssign("X_train", data.table(read.table (X_train_path)))
delayedAssign("Y_train", data.table(read.table (Y_train_path)))
delayedAssign("subject_test", data.table(read.table(subject_test_path)))
delayedAssign("X_test", data.table(read.table (X_test_path)))
delayedAssign("Y_test", data.table(read.table (Y_test_path)))
#  Load train dataset as datatables.
#  Assign labels as documented in the features file
setnames (X_train, features$V2)
setnames (subject_train, "Subject")
setnames (Y_train, "Y")
setnames (X_test, features$V2)
setnames (subject_test, "Subject")
setnames (Y_test, "Y")
keep <- grep ("*mean\\(\\)*|*std*", features$V2)
keep
select(X_train, keep)
select(X_test, keep)
keep <- grep ("*mean\\(\\)*|*std*", features$V2)
X_train <- select(X_train, keep)
X_test <- select(X_test, keep)
#  append subject column and Y column to the features.
har_train <- cbind(subject_train, X_train, Y_train )
har_test <- cbind(subject_test, X_test, Y_test)
#
# Combine test and train datasets
#
har <- rbind (har_train, har_test)
har
load_har_data_table()
DT <- load_har_data_table()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
names(DT)
dt <- DT
names(dt) | grep ("Y|Subject")
names(dt) | grep ("Y|Subject")
names(dt) %>% grep ("Y|Subject")
grep ("Y|Subject", names(dt))
names(dt)[grep ("Y|Subject", names(dt))]
names(dt)[grep ("^Y|Subject", names(dt))]
names(dt)[grep ("^Y$|^Subject$", names(dt))]
grep ("^Y$|^Subject$", names(dt))
dt %>%
group_by(subject) %>%
transmutate("tBodyAcc-mean()-Y" <- mean ("tBodyAcc-mean()-Y", na.rm=TRUE))
dt %>%
group_by(subject) %>%
transmutate($2 <- mean ($2, na.rm=TRUE))
dt %>%
group_by(subject) %>%
transmutate(tBodyAcc-mean\(\)-Y <- mean (tBodyAcc-mean\(\)-Y, na.rm=TRUE))
dt %>%
group_by(subject) %>%
transmutate(tBodyAcc-mean\(\)-Y <- mean (tBodyAcc-mean\(\)-Y, na.rm=TRUE))
dt %>%
group_by(subject) %>%
transmutate(tBodyAcc-mean\\(\\)-Y <- mean (tBodyAcc-mean\\(\\)-Y, na.rm=TRUE))
cols <-  grep ("^Y$|^Subject$", names(dt))
cols <-  grep ("^Y$|^Subject$", names(dt))
names(dt)
features$V2
sub ("(|)", features$V2, "_")
sub ("(|)", "_", features$V2)
sub ("*(*|*)*", "_", features$V2)
sub ("(", "_", features$V2)
sub ("\\(", "_", features$V2)
sub ("\\(", "_", features$V2)
renamed <- features$V2
renamed <- sub ("\\(", "_", renamed)
renamed <- sub ("\\)", "_", renamed)
renamed <- sub ("\\,", "_", renamed)
renames
renamed
renamed <- features$V2
renamed <- sub ("\\(", "_", renamed)
renamed <- sub ("\\)", "_", renamed)
renamed <- sub ("\\,", "_", renamed)
renamed <- sub ("\\-", "_", renamed)
renamed
load_har_data_table()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
load_har_data_table()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
load_har_data_table()
DT <- load_har_data_table()
names (DT)
renamed <- names (DT)
sub ("\\(\\)", "", renamed)
renamed <- names(har)
renamed <- sub ("\\(\\)", "", renamed)
renamed <- sub ("\\-", "_", renamed)
renamed
renamed <- sub ("-", "_", renamed)
renamed
renamed <- names(har)
renamed <- sub ("\\(\\)", "", renamed)
renamed <- sub ("-", "_", renamed)
renamed
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
renamed <- names(har)
renamed <- sub ("\\(\\)", "", renamed)
renamed <- sub ("-", "_", renamed)
renamed <- sub ("-", "_", renamed)
renamed
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
load_har_data_table()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
load_har_data_table()
renamed <- names(har)
renamed <- sub ("\\(\\)", "", renamed)
renamed <- sub ("-", "_", renamed)
renamed <- sub ("-", "_", renamed)
str (renamed)
renamed <- names(har)
renamed <- sub ("\\(\\)", "", renamed)
renamed <- sub ("-", "_", renamed)
renamed <- sub ("-", "_", renamed) #asdf
str (renamed)
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
str (renamed)
load_har_data_table()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
load_har_data_table()
DT<-  load_har_data_table()
names(DT)
summarize (DT, arr = mean(names(DT)[3]))
dt %>%
group_by(subject) %>%
summarize (tBodyAcc_mean_X = mean (tBodyAcc_mean_X))
dt <- DT
dt %>%
group_by(subject) %>%
summarize (tBodyAcc_mean_X = mean (tBodyAcc_mean_X))
dt %>%
group_by(Subject) %>%
summarize (tBodyAcc_mean_X = mean (tBodyAcc_mean_X))
dt
dt %>%
group_by(Subject) %>%
summarize (tBodyAcc_mean_X = mean (tBodyAcc_mean_X))
x <- dt %>%
group_by(subject) %>%
summarize (tBodyAcc_mean_X = mean (tBodyAcc_mean_X))
x <- dt %>%
group_by(Subject) %>%
summarize (tBodyAcc_mean_X = mean (tBodyAcc_mean_X))
x
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
copy(DT)
vignette("window-function").
dt <- copy(DT)
x <- dt %>%
group_by(Subject) %>%
summarize (tBodyAcc_mean_X = mean (tBodyAcc_mean_X))
x
dt %>%
+     group_by(Subject)
dt <- copy(DT)
dt %>%
group_by(Subject)
dt <- copy(DT)
group_by(dt, Subject)
summarize (dt, tBodyAcc_mean_X = mean (tBodyAcc_mean_X))
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
dt <- copy(DT)
group_by(dt, Subject)
summarize (dt, tBodyAcc_mean_X_M = mean (tBodyAcc_mean_X))
dt <- copy(DT)
group_by(dt, Subject)
summarize (dt, tBodyAcc_mean_X_M = mean (tBodyAcc_mean_X))
dt <- copy(DT)
group_by(dt, Subject)
summarize (dt,
Subject,
tBodyAcc_mean_X_M = mean (tBodyAcc_mean_X))
transform (dt,
tBodyAcc_mean_X_M = mean (tBodyAcc_mean_X))
dt <- copy(DT)
dt <- group_by(dt, Subject)
transform (dt,
tBodyAcc_mean_X_M = mean (tBodyAcc_mean_X))
dt <- copy(DT)
dt <- group_by(dt, Subject)
dt
mean (dt,tBodyAcc_mean_X)
mean (dt$tBodyAcc_mean_X)
mean (dt$tBodyAcc_mean_X)
dt[,tBodyAcc_mean_X_M:= mean(tBodyAcc_mean_X),by=Subject]
dt[,tBodyAcc_mean_X_M:= mean(tBodyAcc_mean_X),by=Subject][Subject, tBodyAcc_mean_X_M]
dt[,tBodyAcc_mean_X_M:= mean(tBodyAcc_mean_X),by=Subject][, c("Subject",  "tBodyAcc_mean_X_M"]
(dt[,tBodyAcc_mean_X_M:= mean(tBodyAcc_mean_X),by=Subject])[, c("Subject",  "tBodyAcc_mean_X_M"]
dt[,tBodyAcc_mean_X_M:= mean(tBodyAcc_mean_X),by=Subject][, c("Subject",  "tBodyAcc_mean_X_M"]
dt[,tBodyAcc_mean_X_M:= mean(tBodyAcc_mean_X),by=Subject]
x <- dt[,tBodyAcc_mean_X_M:= mean(tBodyAcc_mean_X),by=Subject]
x
x[, c("Subject",  "tBodyAcc_mean_X_M"]
x[, c("Subject",  "tBodyAcc_mean_X_M")]
x
x[, 1:4]
x
x[1:4,]
x[1:4,]
x
str(x)
x$Y
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
str(x)
delayedAssign("activities", data.table(read.table(activities_path, stringsAsFactors=FALSE)))
activities
activities_path <- paste (uci_har_path, sep="/", "activity_labels.txt")
delayedAssign("activities", data.table(read.table(activities_path, stringsAsFactors=FALSE)))
activities
delayedAssign("activities", data.table(read.table(activities_path, stringsAsFactors=FALSE)))
activities
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
delayedAssign("activities", data.table(read.table(activities_path, stringsAsFactors=TRUE)))
activities
?melt
?join
activities
setkey(activities, V1)
setkey(har, Activty)
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
setkey(har, "Activty")
uci_har_dir <- "UCI HAR Dataset"
uci_har_path <- paste (wd, sep="/", uci_har_dir)
uci_har_train_path <- paste (uci_har_path, sep="/", "train")
uci_har_test_path <- paste (uci_har_path, sep="/", "test")
features_path <- paste (uci_har_path, sep="/", "features.txt")
activities_path <- paste (uci_har_path, sep="/", "activity_labels.txt")
subject_train_path <- paste(uci_har_train_path, sep="/", "subject_train.txt")
X_train_path <- paste(uci_har_train_path, sep="/", "X_train.txt")
Y_train_path <- paste(uci_har_train_path, sep="/", "Y_train.txt")
subject_test_path <- paste(uci_har_test_path, sep="/", "subject_test.txt")
X_test_path <- paste(uci_har_test_path, sep="/", "X_test.txt")
Y_test_path <- paste(uci_har_test_path, sep="/", "Y_test.txt")
delayedAssign("features", data.table(read.table(features_path, stringsAsFactors=FALSE)))
delayedAssign("activities", data.table(read.table(activities_path, stringsAsFactors=TRUE)))
delayedAssign("subject_train", data.table(read.table(subject_train_path)))
delayedAssign("X_train", data.table(read.table (X_train_path)))
delayedAssign("Y_train", data.table(read.table (Y_train_path)))
delayedAssign("subject_test", data.table(read.table(subject_test_path)))
delayedAssign("X_test", data.table(read.table (X_test_path)))
delayedAssign("Y_test", data.table(read.table (Y_test_path)))
# Load train dataset as datatables.
# Assign labels as documented in the features file.
# However, remove characters that cannot directly be used in r command line
renamed <- features$V2
setnames (X_train, renamed)
setnames (subject_train, "Subject")
setnames (Y_train, "Activity")
#  Load test dataset as datatables.
#  Assign labels as documented in the features file
setnames (X_test, features$V2)
setnames (subject_test, "Subject")
setnames (Y_test, "Activity")
#
#  keep only mean and std columns in X_train and X_test
#
keep <- grep ("*mean\\(\\)*|*std*", features$V2)
X_train <- select(X_train, keep)
X_test <- select(X_test, keep)
#  append subject column and Y column to the features.
har_train <- cbind(subject_train, Y_train, X_train )
har_test <- cbind(subject_test, Y_test, X_test)
#
# Combine test and train datasets
#
har <- rbind (har_train, har_test)
setkey(activities, V1)
setkey(har, "Activty")
har
setkey(har, Activty)
setkey(har, Activity)
merge(har, activities)
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
merge(har, activities)
setnames(activities, c("id", "Activity"))
setkey(activities, Activity)
setkey(har, Activity)
merge(har, activities)
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
setnames(activities, c("Activity", "ActivityName"))
setkey(activities, Activity)
setkey(har, Activity)
merge(har, activities)
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
?select
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
load_har_data_table()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
load_har_data_table()
DF <- load_har_data_table()
DF
select (DF, -ActivityID)
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
select (DF, -ActivityID)
DF <- load_har_data_table()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
dim (DF)
View(DF)
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
DF2 <- load_har_data_table()
dim(DF2)
features
features$V2
grep ("*mean*|*std*", features$V2)
features$V2[grep ("*mean*|*std*", features$V2)]
features$V2[grep ("*-mean*|*-std*", features$V2)]
features$V2[grep ("*-mean\\(*|*-std*", features$V2)]
features$V2[grep ("*-mean\\(\\)*|*-std*", features$V2)]
dim(DT)
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
DF <- load_har_data_table()
DF
dt <- DT
dt <- DF
names (select (dt, -Subject, -Activity))
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
columns <- names (select (dt, -Subject, -Activity))
sapply(columns, f(col){
dt[,paste("m_", col):= mean(col),by=Subject]
} )
sapply(columns, function(col){
dt[,paste("m_", col):= mean(col),by=Subject]
} )
sapply(columns, function(col){
dt[,paste("m_", col):= mean("col"),by=Subject]
} )
select (dt, -columns)
dt <- DF
columns <- names (select (dt, -Subject, -Activity))
n <- sapply(columns, function(col){
dt[,paste("m_", col):= mean("col"),by=Subject]
} )
dt <- TRUE
dt <- DF
columns <- names (select (dt, -Subject, -Activity))
n <- sapply(columns, function(col){
dt[,paste("m_", col):= mean("col"),by=Subject]
} )
dt
dt <- NULL
dt <- DF
columns <- names (select (dt, -Subject, -Activity))
n <- sapply(columns, function(col){
dt[,paste("m_", col):= mean(dt[col]),by=Subject]
} )
paste0("hey", "ho","lets", "go")
col <- foo
col <- "foo"
paste0("m_", col ":=mean(", col")")
paste0("m_", col, ":=mean(", col")")
paste0("m_", col, ":=mean(", col,")")
paste0("m_", col, ":=mean(", col,")")
expr <- parse(text = paste0("m_", col, ":=mean(", col,")"))
expr
eval(expr)
dt <- NULL
dt <- DF
columns <- names (select (dt, -Subject, -Activity))
n <- sapply(columns, function(col){
expr <- parse(text = paste0("m_", col, ":=mean(", col,")"))
dt[,eval(expr),by=Subject]
} )
dt <- NULL
dt <- DF
columns <- names (select (dt, -Subject, -Activity))
dt <- NULL
dim (DF)
DF <- load_har_data_table
DF <- load_har_data_table()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
dt <- NULL
dt <- copy(DF)
columns <- names (select (dt, -Subject, -Activity))
n <- sapply(columns, function(col){
expr <- parse(text = paste0("m_", col, ":=mean(", col,")"))
dt[,eval(expr),by=Subject]
} )
n
select (dt, -columns)
dt <- copy(DF)
columns <- names (select (dt, -Subject, -Activity))
select (dt, -one_of(columns))
View(dt)
dt <- copy(DF)
columns <- names (select (dt, -Subject, -Activity))
sapply(columns, function(col){
expr <- parse(text = paste0("m_", col, ":=mean(", col,")"))
dt[,eval(expr),by=Subject]
#    select (dt, -col)
} )
dt <- select (dt, -one_of(columns))
dt
dim (dt)
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
distinct(dt)
dim(distinct(dt))
TDT <- transform_har_data_table(DF)
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
sapply (names(TDT), print)
sapply (names(TDT), paste)
sapply (names(TDT), printf)
sapply (names(TDT), print)
sapply (names(TDT), )
dim(TDT)
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
?write.table
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
run_analysis()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
run_analysis()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
run_analysis()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
run_analysis()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
run_analysis()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
run_analysis()
source('C:/Users/Tom/Desktop/MOOC/Coursera Data Science/getdata-009/run_analysis.R')
run_analysis()
dim(load_har_data_table())
